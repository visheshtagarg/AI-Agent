{
  "project_name": "Multi-User Smart Diet & Meal Planner Agent",
  "author": {
    "name": "Visheshta Garg",
    "university": "IIT Roorkee",
    "department": "Civil Engineering",
    "degree": "B.Tech"
  },
  "description": "An advanced AI-powered meal recommendation system capable of generating personalized meal plans for multiple users in batch mode using RAG and LoRA fine-tuned transformers. Supports custom calorie goals, diet types, and multiple optimization objectives.",
  "tech_stack": {
    "language": "Python 3.10+",
    "frameworks": ["Streamlit", "LangChain", "Transformers", "PEFT", "cvxpy"],
    "vector_store": ["ChromaDB (default)", "FAISS (optional)"],
    "ml": ["torch", "datasets", "sentence-transformers", "pandas", "numpy"],
    "ui": ["Streamlit", "CLI"],
    "batch_mode": "CSV-based user ingestion"
  },
  "data_format": {
    "input_csv": {
      "description": "Each row corresponds to one user for whom a meal plan will be generated.",
      "columns": [
        "Name (str) ‚Äî user's name",
        "Age (int) ‚Äî 10 to 100",
        "Gender (str) ‚Äî Male/Female/Other",
        "Goal (str) ‚Äî Weight loss / Maintenance / Muscle gain / Fat loss / Balanced diet / Keto / Diabetic-friendly",
        "Target_Calories (int) ‚Äî 800 to 4500",
        "Diet_Preference (str) ‚Äî Vegetarian / Non-vegetarian / Vegan",
        "Meals_Per_Day (int) ‚Äî min 1, max 6",
        "Health_Conditions (str, optional) ‚Äî comma-separated text"
      ],
      "example": "Name,Age,Gender,Goal,Target_Calories,Diet_Preference,Meals_Per_Day,Health_Conditions\nAarav,25,Male,Muscle gain,2800,Non-vegetarian,5,None\nVisheshta,22,Female,Weight loss,1800,Vegetarian,4,Low sugar"
    },
    "output_csv": {
      "columns": [
        "Name",
        "Meal",
        "Items",
        "Calories",
        "Macro_Balance_Score",
        "Diversity_Score",
        "Total_Calories",
        "Deviation_%"
      ],
      "path": "outputs/multi_user_meal_plans.csv"
    }
  },
  "architecture": {
    "agents": [
      {
        "name": "PlannerAgent",
        "role": "Distribute target calories across 1‚Äì6 meals based on goal type and total calories.",
        "features": ["Dynamic meal count", "Adaptive calorie split by goal type"]
      },
      {
        "name": "RAGRetrieverAgent",
        "role": "Retrieve meal options from Chroma/FAISS using sentence-transformer embeddings.",
        "embedding_model": "all-MiniLM-L6-v2"
      },
      {
        "name": "MealGeneratorAgent",
        "role": "Generate meals per user using fine-tuned LoRA model conditioned on user goals and dietary preferences.",
        "model": "flan-t5-base + LoRA",
        "context": "RAG-enhanced nutritional text snippets"
      },
      {
        "name": "OptimizerAgent",
        "role": "Optimize calorie allocation and macro distribution across meals using LP in cvxpy."
      },
      {
        "name": "EvaluatorAgent",
        "role": "Compute per-user and per-meal metrics (calorie deviation, diversity, macro match)."
      },
      {
        "name": "CoachAgent",
        "role": "Generate final formatted results for each user and batch summary CSV output."
      }
    ],
    "flow": "Upload CSV ‚Üí Iterate per user ‚Üí Generate meals via RAG + LoRA ‚Üí Optimize ‚Üí Evaluate ‚Üí Tabular display + Export CSV"
  },
  "ui": {
    "type": "Streamlit",
    "entrypoint": "app.py",
    "features": [
      "üì§ Upload CSV with user data",
      "üß† Generate meal plans for all users (batch mode)",
      "üìä Display each user's plan in an interactive data table",
      "üíæ Download combined CSV report",
      "‚öôÔ∏è Adjustable number of meals (1‚Äì6)",
      "üìà Evaluation metrics displayed alongside meal plans"
    ]
  },
  "evaluation": {
    "metrics": {
      "calorie_mape": "Mean Absolute Percentage Error between total and target calories",
      "macro_match_score": "Cosine similarity between generated and ideal macro ratios",
      "diversity_score": "Unique meal items / total meal items"
    },
    "thresholds": {
      "calorie_mape": "<=10%",
      "macro_match_score": ">=0.8",
      "diversity_score": ">=0.6"
    },
    "output": "Each user's metrics appended to CSV for transparency."
  },
  "repo_structure": {
    "folders": {
      "agents": [
        "planner_agent.py",
        "meal_generator_agent.py",
        "rag_retriever_agent.py",
        "optimizer_agent.py",
        "evaluator_agent.py",
        "coach_agent.py"
      ],
      "data": ["vectorstore/", "user_inputs.csv"],
      "models": ["lora_meal_generator/"],
      "outputs": ["multi_user_meal_plans.csv"],
      "scripts": ["train_lora.py", "build_rag_index.py"],
      "utils": ["csv_handler.py", "metrics.py"]
    }
  },
  "app_functionality": {
    "single_user_mode": "User fills Streamlit form and gets personalized plan instantly.",
    "batch_mode": "Upload CSV of multiple users ‚Üí Loop through planner + generator ‚Üí Combine results ‚Üí Export CSV.",
    "output_table": "Tabular display of meal plan using st.dataframe() with calories and macros per meal."
  },
  "requirements": [
    "streamlit",
    "pandas",
    "torch",
    "transformers",
    "peft",
    "sentence-transformers",
    "chromadb",
    "faiss-cpu",
    "cvxpy",
    "langchain",
    "plotly",
    "numpy",
    "loguru"
  ],
  "deliverables": [
    "Batch-enabled Streamlit app with RAG + LoRA integration",
    "Sample CSV input/output",
    "Fine-tuned LoRA model checkpoint",
    "Evaluation and metrics report per user",
    "Architecture + implementation documentation"
  ],
  "usage_notes": "Upload an input CSV (as per schema) in Streamlit. The app will iterate each row, generate meals using RAG and LoRA, display results in table format, and export final consolidated CSV.",
  "next_steps": [
    "1. Populate Chroma with nutrition facts (scripts/build_rag_index.py).",
    "2. Fine-tune LoRA with meal dataset and save to models/lora_meal_generator/.",
    "3. Upload sample users CSV and test batch plan generation.",
    "4. Integrate evaluation report logging in logs/evaluations.json.",
    "5. Deploy Streamlit on Render or HuggingFace Spaces."
  ]
}

